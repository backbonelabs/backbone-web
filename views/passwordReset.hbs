<div class="container">
  <div class="row">
    <div class="col-xs-12 col-sm-6">
      <h1>Password Reset</h1>
      <form id="form">
        <div class="form-group">
          <label for="password">New password</label>
          <input type="password" class="form-control" id="password" placeholder="New password">
        </div>
        <div class="form-group">
          <label for="verifyPassword">Verify password</label>
          <input type="password" class="form-control" id="verifyPassword" placeholder="Verify password">
        </div>
        <button type="submit" class="btn btn-primary" id="submit">Reset password</button>
        <div class="alert alert-danger hidden" id="alert"></div>
      </form>
    </div>
  </div>
</div>
<script src="/public/js/zepto.min.js"></script>
<script type="text/javascript">
// Disable ES6-specific lint rules
/* eslint-disable no-var, func-names, prefer-arrow-callback */
  var $password = $('#password');
  var $verifyPassword = $('#verifyPassword');
  var $submit = $('#submit');
  var $alert = $('#alert');

  $submit.prop('disabled', true);

  function validateForm() {
    var password = $password.val();
    var verifyPassword = $verifyPassword.val();
    if (!password || !verifyPassword) {
      $alert.addClass('hidden');
    }
    if (password && verifyPassword) {
      if (password === verifyPassword) {
        $alert.addClass('hidden');
        $submit.prop('disabled', false);
        return true;
      }
      $alert.removeClass('hidden');
      $alert.text('Passwords must match');
    }
    $submit.prop('disabled', true);
    return false;
  }

  $.each([$password, $verifyPassword], function (i, field) {
    field.on('input', function () {
      validateForm();
    });
  });

  $('#form').on('submit', function (event) {
    event.preventDefault();
    validateForm();
  });
</script>
